import{j as e,L as x}from"./Loading.ClX_7RKV.js";import{r as d}from"./index.DhYZZe0J.js";function h(){const[o,n]=d.useState(!1),[a,c]=d.useState({nombres:"",apellidos:"",edad:""}),i=()=>{n(!o)},r=t=>{const{name:u,value:l}=t.target;c({...a,[u]:l})},s=async t=>{t.preventDefault();const u={name:a.nombres,last_name:a.apellidos,age:a.edad};try{const l=await fetch("https://api-mysql-test.vercel.app/api/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!l.ok)throw new Error("Error en la solicitud");const m=await l.json();alert("Usuario creado con Ã©xito:",m),window.location.href="/"}catch(l){console.error("Error al crear usuario:",l)}};return e.jsxs("div",{className:"py-3",children:[e.jsx("button",{onClick:i,className:"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button",children:"Crear Usuario"}),o&&e.jsx("div",{id:"crud-modal",tabIndex:"-1","aria-hidden":"true",className:"fixed inset-0 flex items-center justify-center bg-black/65 z-50",children:e.jsx("div",{className:"relative p-4 w-full max-w-md max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Crear Nuevo Usuario"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:i,children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1l6 6m0 0l6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Cerrar modal"})]})]}),e.jsxs("form",{className:"p-4 md:p-5",onSubmit:s,children:[e.jsxs("div",{className:"grid gap-4 mb-4 grid-cols-1",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombres",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Nombres"}),e.jsx("input",{type:"text",name:"nombres",id:"nombres",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Ingresa tus nombres",required:!0,value:a.nombres,onChange:r})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apellidos",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Apellidos"}),e.jsx("input",{type:"text",name:"apellidos",id:"apellidos",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Ingresa tus apellidos",required:!0,value:a.apellidos,onChange:r})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edad",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Edad"}),e.jsx("input",{type:"number",name:"edad",id:"edad",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Ingresa tu edad",required:!0,value:a.edad,onChange:r})]})]}),e.jsxs("button",{type:"submit",className:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[e.jsx("svg",{className:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Crear Usuario"]})]})]})})})]})}const b=()=>{const[o,n]=d.useState([]),[a,c]=d.useState(!0);d.useEffect(()=>{(async()=>{try{const t=await(await fetch("https://api-mysql-test.vercel.app/api/data")).json();n(t)}catch(s){console.error("Error fetching data:",s)}finally{c(!1)}})()},[]);const i=async r=>{try{if(!(await fetch(`https://api-mysql-test.vercel.app/api/data/${r}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar el usuario");n(o.filter(t=>t.id_user!==r))}catch(s){console.error("Error al eliminar el usuario:",s)}};return a?e.jsx(x,{}):e.jsx("section",{className:"w-9/12 mx-auto pt-10",children:e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nombres"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Apellidos"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Edad"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:e.jsx("span",{className:"flex justify-end",children:"Acciones"})})]})}),e.jsx("tbody",{children:o.map(r=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.id_user}),e.jsx("td",{className:"px-6 py-4",children:r.name}),e.jsx("td",{className:"px-6 py-4",children:r.last_name}),e.jsx("td",{className:"px-6 py-4",children:r.age}),e.jsxs("td",{className:"px-6 py-4 text-right flex gap-4 justify-end",children:[e.jsx("a",{href:`/${r.id_user}`,className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Editar"}),e.jsx("button",{onClick:()=>i(r.id_user),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Eliminar"})]})]},r.id_user))})]})})]})})};export{b as default};
